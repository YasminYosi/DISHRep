<?xml version="1.0" encoding="UTF-8"?>
<con:testCase id="d7c0ca96-419e-4a2c-91d5-7426b1169cbb" discardOkResults="false" failOnError="false" failTestCaseOnErrors="true" keepSession="false" name="F8161_3" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="" xmlns:con="http://eviware.com/soapui/config"><con:settings><con:setting id="87bd7c8b-f220-4ebd-b447-c730291e56cbfileName">domain-service-account</con:setting><con:setting id="60cee3de-292b-4ae4-b7d5-4a489c95e9e7fileName">domain-service-account</con:setting><con:setting id="d7c0ca96-419e-4a2c-91d5-7426b1169cbbfileName">F8161_3</con:setting></con:settings><con:savedRecentRuns>1</con:savedRecentRuns><con:testStep type="datasource" name="getData" id="f8fe6365-2970-4c2d-9b75-03dd3699e15d"><con:settings/><con:config xsi:type="con:DataSourceStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:dataSource type="Grid"><con:configuration><check><![CDATA[<xml-fragment><con:entry xmlns:con="http://eviware.com/soapui/config">true</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">true</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">true</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">true</con:entry><con:entry xmlns:con="http://eviware.com/soapui/config">true</con:entry></xml-fragment>]]></check><row>&lt;xml-fragment>&lt;con:entry xmlns:con="http://eviware.com/soapui/config">804690%&lt;/con:entry>&lt;con:entry xmlns:con="http://eviware.com/soapui/config"/>&lt;/xml-fragment></row><row>&lt;xml-fragment>&lt;con:entry xmlns:con="http://eviware.com/soapui/config">807210%&lt;/con:entry>&lt;con:entry xmlns:con="http://eviware.com/soapui/config"/>&lt;/xml-fragment></row><row>&lt;xml-fragment>&lt;con:entry xmlns:con="http://eviware.com/soapui/config">807220%&lt;/con:entry>&lt;con:entry xmlns:con="http://eviware.com/soapui/config"/>&lt;/xml-fragment></row><row>&lt;xml-fragment>&lt;con:entry xmlns:con="http://eviware.com/soapui/config">807260%&lt;/con:entry>&lt;con:entry xmlns:con="http://eviware.com/soapui/config"/>&lt;/xml-fragment></row><row>&lt;xml-fragment>&lt;con:entry xmlns:con="http://eviware.com/soapui/config">804691%&lt;/con:entry>&lt;con:entry xmlns:con="http://eviware.com/soapui/config"/>&lt;/xml-fragment></row></con:configuration></con:dataSource><con:property>SPA</con:property><con:completeLastOperation>true</con:completeLastOperation><con:restartOnRun>true</con:restartOnRun></con:config></con:testStep><con:testStep type="datagen" name="AgentId" id="22e69514-ead7-4746-81b1-f417c0b5fab3"><con:settings/><con:config xsi:type="con:DataGeneratorStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:property type="Script"><con:configuration><script>import java.time.LocalDateTime;
import java.time.format.DateTimeFormatter

DateTimeFormatter dtf = DateTimeFormatter.ofPattern("yyyyMMddHHmmss");
LocalDateTime now = LocalDateTime.now();
String datetime = dtf.format(now);
def agent="test.test"
def agentId=agent+datetime</script></con:configuration><con:name>AgentId</con:name><con:mode>STEP</con:mode><con:shared>false</con:shared></con:property><con:property type="Number"><con:configuration><start>0</start><end>9999</end><step/><pattern>FingerPrint#</pattern><random>true</random><persist>false</persist></con:configuration><con:name>FingerPrint</con:name><con:mode>STEP</con:mode><con:shared>false</con:shared></con:property></con:config></con:testStep><con:testStep type="restrequest" name="updateAccountEmailAddressUsingDELETE" id="d74dbe5d-d57d-4802-9220-6e7ceabd3b41"><con:settings/><con:config service="Domain Service Account" resourcePath="/account/{accountId}/email" methodName="updateAccountEmailAddressUsingDELETE" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="updateAccountEmailAddressUsingDELETE" id="5ae0c080-16f5-458e-85e2-ca4dc786740e" mediaType="application/json" postQueryString="false"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>https://apps-int.global.dish.com/integration/domain-service-account</con:endpoint><con:request/><con:originalUri>https://apps-int.global.dish.com/integration/domain-service-account/account/8046909286549747/email</con:originalUri><con:assertion type="JsonPath Match" id="b03f4d61-5675-4406-9a8e-adc6e5b5a29a" name="JsonPath Match"><con:configuration><path>$['_status'][0]['message']</path><content>bad request</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="accountId" value="${getData#AccountId}"/>
  <con:entry key="emailAddress" value="${updateAccountEmailAddressUsingPOST#RawRequest#$['emailAddress']}"/>
  <con:entry key="agentId" value="${AgentId#AgentId}"/>
  <con:entry key="sessionId" value="${getAgentSessionUsingGET#Response#$['agentSessionId']}"/>
</con:parameters><con:environmentSpec><con:entry environmentId="dd957b68-2280-4a28-9c3f-b73e840b2bd0"><con:authProfile>No Authorization</con:authProfile></con:entry><con:entry environmentId="84c7087b-2d5a-464f-aa70-6d6eb23c5a48"><con:authProfile>Inherit From Parent</con:authProfile></con:entry><con:entry environmentId="122851fe-0a64-4718-9aa8-19a9e4eb0e86"><con:authProfile>Inherit From Parent</con:authProfile></con:entry></con:environmentSpec></con:restRequest></con:config></con:testStep><con:testStep type="restrequest" name="getAgentSessionUsingGET" id="487da7c8-d753-452b-af55-888e2d224ea2"><con:settings/><con:config service="beacon-session" resourcePath="/{agentId}/agentSession" methodName="getAgentSessionUsingGET" xsi:type="con:RestRequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:restRequest name="getAgentSessionUsingGET" id="6b46321d-527a-43f7-bdfa-558e2a4c1642" mediaType="application/json"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:endpoint>http://beacon-session.test.apps.internal-green.test.mer.cfdish.io</con:endpoint><con:request/><con:originalUri>http://beacon-session.test.apps.internal-green.test.mer.cfdish.io/test.test20171107005646/agentSession</con:originalUri><con:assertion type="Valid HTTP Status Codes" id="53f70e03-cb9a-4252-bae0-9dbec6bf14f0" name="Valid HTTP Status Codes"><con:settings/><con:configuration><codes>200</codes></con:configuration></con:assertion><con:credentials><con:selectedAuthProfile>No Authorization</con:selectedAuthProfile><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:parameters>
  <con:entry key="agentId" value="${AgentId#AgentId}"/>
  <con:entry key="fingerprint" value="${AgentId#FingerPrint}"/>
</con:parameters></con:restRequest></con:config></con:testStep><con:testStep type="datagen" name="GenerateRandomAddress" id="209ded21-c642-47ef-a6f5-74d07ead45d7"><con:settings/><con:config xsi:type="con:DataGeneratorStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:property type="List"><con:configuration><value>3257 e parker way</value><value>3256 w mississipi blvd</value><value>3255 n nixon ave</value><value>3254 s franktown st</value><value>3253 s parker rd</value><value>3252 s mineral st</value><value>3251 s berklwy way</value><value>3250 s dayton blvd</value><value>3249 s gandhi ave</value><value>3248 s carlson rd</value><value>3247 s jefferson rd</value><value>3246 s washington rd</value><random>true</random></con:configuration><con:name>addrLine1</con:name><con:mode>READ</con:mode><con:shared>false</con:shared></con:property><con:property type="Number"><con:configuration><start>10</start><end>9999</end><step/><pattern/><random>true</random><persist>false</persist></con:configuration><con:name>addrLine2</con:name><con:mode>READ</con:mode><con:shared>false</con:shared></con:property></con:config></con:testStep><con:testStep type="delay" name="Delay" id="b4d1c173-23c7-405b-910b-3b2c195b7a56"><con:settings/><con:config><delay>10000</delay></con:config></con:testStep><con:testStep type="datagen" name="GenerateRandomEmail" id="6f73f7b5-96e2-4723-8894-93fa520ac941"><con:settings/><con:config xsi:type="con:DataGeneratorStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:property type="Number"><con:configuration><start>99</start><end>999</end><step/><pattern>accountTestEmail@dishemail.com</pattern><random>true</random><persist>false</persist></con:configuration><con:name>email</con:name><con:mode>READ</con:mode><con:shared>false</con:shared></con:property></con:config></con:testStep><con:testStep type="datasourceloop" name="getDataLoop" id="afa2f238-5f5d-4524-96b2-1e48bf856893"><con:settings/><con:config><dataSourceStep>getData</dataSourceStep><targetStep>getAccountIDfromSUBDB</targetStep></con:config></con:testStep><con:properties/><con:reportParameters/><con:breakPoints><con:testStepId>54b73ab7-8c21-4cae-8507-3b5804cd9a0e</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>4173fd5e-794e-4db3-b98e-8ad5661364c3</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>47a610b9-b7f0-4596-8bb2-da684046a7b9</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>858725a0-1508-44a9-a6dc-063728ad3572</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>c43e1711-a5f4-40d9-b154-a4555fc8ce7d</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>b7fb5969-65d0-4b59-a0e4-6a03f9b58173</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>a7be7b04-b820-4b56-93d7-5fc55b2659c4</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>2dccbec9-b9dd-4eab-9020-242158494773</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>8a01c3dc-1d9e-4bf3-a019-f8c1ab01b71b</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>a6308775-15e7-4066-b946-25b8b157f4ac</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:breakPoints><con:testStepId>08326781-fca1-454a-b914-bcd9222ad555</con:testStepId><con:status>NONE</con:status><con:properties/></con:breakPoints><con:environmentSpec><con:entry environmentId="84c7087b-2d5a-464f-aa70-6d6eb23c5a48"><con:authProfile>Inherit From Parent</con:authProfile></con:entry><con:entry environmentId="122851fe-0a64-4718-9aa8-19a9e4eb0e86"><con:authProfile>Inherit From Parent</con:authProfile></con:entry></con:environmentSpec></con:testCase>